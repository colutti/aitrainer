<div class="h-full overflow-y-auto bg-dark-bg p-8">
  <div class="max-w-2xl mx-auto">
    <header class="mb-8">
      <h2 class="text-3xl font-bold tracking-tight text-text-primary">Meu Perfil</h2>
      <p class="mt-2 text-text-secondary">Essas informações nos ajudam a personalizar suas recomendações de treino.</p>
    </header>

    <form (ngSubmit)="saveProfile()" class="space-y-6 bg-light-bg p-8 rounded-lg shadow-lg">
      <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2">
        <div>
          <label for="age" class="block text-sm font-medium text-text-secondary">Idade</label>
          <input type="number" appNumericInput name="age" id="age" [(ngModel)]="profile().age"
            class="mt-1 block w-full px-3 py-2 bg-dark-bg border border-secondary rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
          @if(validationErrors()['age']) {
            <p class="mt-1 text-sm text-red-400">{{ validationErrors()['age'] }}</p>
          }
        </div>

        <div>
          <label for="gender" class="block text-sm font-medium text-text-secondary">Gênero</label>
          <select id="gender" name="gender" [(ngModel)]="profile().gender"
            class="mt-1 block w-full pl-3 pr-10 py-2 bg-dark-bg border border-secondary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md">
            <option value="">Selecione...</option>
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
          </select>
        </div>

        <div>
          <label for="weight" class="block text-sm font-medium text-text-secondary">Peso (kg)</label>
          <input type="number" appNumericInput name="weight" id="weight" step="0.1" [(ngModel)]="profile().weight"
            class="mt-1 block w-full px-3 py-2 bg-dark-bg border border-secondary rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
          @if(validationErrors()['weight']) {
            <p class="mt-1 text-sm text-red-400">{{ validationErrors()['weight'] }}</p>
          }
        </div>

        <div>
          <label for="height" class="block text-sm font-medium text-text-secondary">Altura (cm)</label>
          <input type="number" appNumericInput name="height" id="height" [(ngModel)]="profile().height"
            class="mt-1 block w-full px-3 py-2 bg-dark-bg border border-secondary rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
        </div>

        <div class="sm:col-span-2">
          <label for="goal" class="block text-sm font-medium text-text-secondary">Objetivo Principal (Descrição)</label>
          <input type="text" name="goal" id="goal" [(ngModel)]="profile().goal"
            placeholder="Ex: Ganhar massa muscular e perder gordura"
            class="mt-1 block w-full px-3 py-2 bg-dark-bg border border-secondary rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
        </div>

        <div>
           <label for="goal_type" class="block text-sm font-medium text-text-secondary">Tipo de Objetivo</label>
           <select id="goal_type" name="goal_type" [(ngModel)]="profile().goal_type" (ngModelChange)="onGoalTypeChange()"
             class="mt-1 block w-full pl-3 pr-10 py-2 bg-dark-bg border border-secondary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md">
             <option value="lose">Perder Peso</option>
             <option value="gain">Ganhar Massa</option>
             <option value="maintain">Manter Peso</option>
           </select>
        </div>

        <div>
           <label for="weekly_rate" class="block text-sm font-medium text-text-secondary">Taxa Semanal (kg/semana)</label>
           <input type="number" appNumericInput name="weekly_rate" id="weekly_rate" step="0.1" [(ngModel)]="profile().weekly_rate"
             [disabled]="profile().goal_type === 'maintain'"
             class="mt-1 block w-full px-3 py-2 bg-dark-bg border border-secondary rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed">
           <p class="mt-1 text-xs text-text-secondary">Recomendado: 0.2kg a 0.5kg/semana</p>
        </div>
      </div>

      <div class="flex items-center justify-end pt-4">
        @if(showSuccess()) {
        <span class="text-green-400 mr-4 transition-opacity duration-300">Perfil salvo com sucesso!</span>
        }
        <button type="submit" [disabled]="isSaving()"
          class="w-32 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-light-bg focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
          @if (isSaving()) {
          <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
          } @else {
          <span>Salvar</span>
          }
        </button>
      </div>
    </form>
  </div>
</div>