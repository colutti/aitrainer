# Render Deployment Configuration
# IMPORTANT: Only main backend and frontend services are deployed to production
# Admin services (frontend-admin, backend-admin) are LOCAL DEVELOPMENT ONLY
# and must be deployed separately or not at all in production
#
# To deploy admin services:
# 1. Create separate Render services via dashboard manually
# 2. Use different environment URLs to avoid exposing admin to prod traffic
# 3. Always use separate X-Admin-Key in production
#
# DO NOT add admin services to this production config file

services:
  - type: web
    name: aitrainer-backend
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn src.api.main:app --workers 1 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT --timeout 120 --graceful-timeout 120
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0

  # COMMENTED OUT: frontend-admin service is not deployed to production
  # Admin app is deployed separately with different authentication
  # - type: static_site
  #   name: aitrainer-frontend-admin
  #   buildCommand: cd frontend/admin && npm install && npm run build
  #   staticPublishPath: frontend/admin/dist

  # COMMENTED OUT: backend-admin service is not deployed to production
  # Admin API is deployed separately with dual authentication (JWT + X-Admin-Key)
  # - type: web
  #   name: aitrainer-backend-admin
  #   env: python
  #   buildCommand: pip install -r requirements.txt
  #   startCommand: gunicorn src.main:app --workers 1 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT
